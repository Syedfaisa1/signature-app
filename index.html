<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Signature App</title>
  <link href="gvcgvbiubo" rel="icon"/>
</head>  
  <style>
    body {
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      background: linear-gradient(135deg, #e0e7ff 0%, #f0f0f0 100%);
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    #signature-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #fff;
      padding: 32px 32px 24px 32px;
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(60,60,120,0.12), 0 1.5px 6px rgba(0,0,0,0.04);
      border: 1.5px solid #e0e7ff;
      max-width: 900px;
      width: 90vw;
      min-width: 320px;
      position: relative;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      color: #2d3a5a;
      margin-bottom: 24px;
      letter-spacing: 1.5px;
      text-align: center;
    }

    canvas {
      border: 2.5px solid #6366f1;
      border-radius: 14px;
      box-shadow: 0 2px 12px rgba(99,102,241,0.08);
      cursor: crosshair;
      background: #f8fafc;
      margin-bottom: 24px;
      transition: box-shadow 0.2s;
    }
    canvas:focus, canvas:hover {
      box-shadow: 0 4px 24px rgba(99,102,241,0.18);
      outline: none;
    }

    .buttons {
      margin-top: 10px;
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }

    button {
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: linear-gradient(90deg, #6366f1 60%, #60a5fa 100%);
      color: white;
      font-weight: 600;
      box-shadow: 0 1px 4px rgba(99,102,241,0.08);
      transition: background 0.2s, transform 0.1s;
    }

    button:hover {
      background: linear-gradient(90deg, #4338ca 60%, #2563eb 100%);
      transform: translateY(-2px) scale(1.04);
    }

    label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 1rem;
      color: #374151;
      background: #f3f4f6;
      padding: 6px 12px;
      border-radius: 6px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.03);
    }

    input[type="color"] {
      border: none;
      padding: 0;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 1px 4px rgba(99,102,241,0.10);
      cursor: pointer;
      transition: box-shadow 0.2s;
    }
    input[type="color"]:hover {
      box-shadow: 0 2px 8px rgba(99,102,241,0.18);
    }

    input[type="number"] {
      border: 1.5px solid #c7d2fe;
      border-radius: 6px;
      padding: 6px 8px;
      font-size: 1rem;
      width: 70px;
      background: #fff;
      color: #374151;
      box-shadow: 0 1px 2px rgba(99,102,241,0.04);
      transition: border 0.2s;
    }
    input[type="number"]:focus {
      border: 1.5px solid #6366f1;
      outline: none;
    }

    @media (max-width: 700px) {
      #signature-container {
        max-width: 100vw;
        width: 100vw;
        min-width: 0;
        box-sizing: border-box;
        padding: 8vw 0 4vw 0;
      }
      canvas {
        width: 92vw !important;
        height: 54vw !important;
        min-width: 0;
        min-height: 80px;
        max-width: 96vw;
        max-height: 60vw;
        display: block;
        box-sizing: border-box;
      }
      #theme-toggle-container {
        position: fixed !important;
        top: 16px !important;
        left: 12px !important;
        z-index: 1001 !important;
        background: none !important;
        box-shadow: none !important;
        border: none !important;
      }
    }
    @media (max-width: 480px) {
      #signature-container {
        padding: 4vw 0 4vw 0;
      }
      canvas {
        width: 96vw !important;
        height: 60vw !important;
        min-width: 0;
        min-height: 60px;
        max-width: 98vw;
        max-height: 70vw;
      }
      #theme-toggle-container {
        top: 8px !important;
        left: 8px !important;
      }
    }

    /* Dark theme styles */
    body.dark-theme {
      background: linear-gradient(135deg, #181c2f 0%, #232946 100%);
    }
    body.dark-theme #signature-container {
      background: #232946;
      border-color: #353b5b;
      box-shadow: 0 8px 32px rgba(30,30,60,0.22), 0 1.5px 6px rgba(0,0,0,0.12);
    }
    body.dark-theme h1 {
      color: #eebbc3;
    }
    body.dark-theme canvas {
      background: #181c2f;
      border-color: #eebbc3;
      box-shadow: 0 2px 12px rgba(238,187,195,0.08);
    }
    body.dark-theme .buttons {
      /* no change needed */
    }
    body.dark-theme button {
      background: linear-gradient(90deg, #eebbc3 60%, #b8c1ec 100%);
      color: #232946;
      box-shadow: 0 1px 4px rgba(238,187,195,0.08);
    }
    body.dark-theme button:hover {
      background: linear-gradient(90deg, #b8c1ec 60%, #eebbc3 100%);
      color: #232946;
    }
    body.dark-theme label {
      background: #353b5b;
      color: #eebbc3;
      box-shadow: 0 1px 2px rgba(238,187,195,0.03);
    }
    body.dark-theme input[type="color"] {
      background: #232946;
      box-shadow: 0 1px 4px rgba(238,187,195,0.10);
    }
    body.dark-theme input[type="number"] {
      background: #232946;
      color: #eebbc3;
      border-color: #b8c1ec;
      box-shadow: 0 1px 2px rgba(238,187,195,0.04);
    }
    body.dark-theme input[type="number"]:focus {
      border-color: #eebbc3;
    }

    /* Creative round dark mode toggle switch */
    #themeToggle {
      appearance: none;
      width: 38px;
      height: 22px;
      background: #c7d2fe;
      border-radius: 16px;
      position: relative;
      outline: none;
      cursor: pointer;
      transition: background 0.3s;
      box-shadow: 0 1px 4px rgba(99,102,241,0.10);
      vertical-align: middle;
      margin: 0 4px;
    }
    #themeToggle:checked {
      background: #6366f1;
    }
    #themeToggleKnob {
      position: absolute;
      left: 0;
      top: 0;
      width: 22px;
      height: 22px;
      background: #fff;
      border-radius: 50%;
      box-shadow: 0 1px 4px rgba(99,102,241,0.10);
      transition: left 0.3s, background 0.3s;
      pointer-events: none;
      z-index: 2;
    }
    #themeToggle:checked + #themeToggleKnob {
      left: 16px;
      background: #eebbc3;
    }
    /* Hide the default checkbox visually */
    #themeToggle::-ms-check {
      display: none;
    }

    #theme-toggle-container {
      position: static !important;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 18px 0 0 0;
      width: 100%;
      background: none !important;
      box-shadow: none !important;
      border: none !important;
      z-index: 1;
    }
    @media (max-width: 700px) {
      #theme-toggle-container {
        margin: 12px 0 0 0;
      }
    }
    @media (max-width: 480px) {
      #theme-toggle-container {
        margin: 8px 0 0 0;
      }
    }
  </style>
</head>
<body>
  <div id="signature-container">
    <h1>Signature App</h1>
    <canvas id="signatureCanvas" width="700" height="400" tabindex="0"></canvas>
    <div id="theme-toggle-container">
      <label id="themeToggleLabel" style="display: flex; align-items: center; gap: 8px; background: #fff; border-radius: 20px; box-shadow: 0 2px 8px rgba(99,102,241,0.10); padding: 6px 16px; margin: 0; border: 1.5px solid #e0e7ff;">
        <span style="font-size:1.3em; transition: filter 0.3s;">ðŸŒž</span>
        <span style="position: relative; display: inline-block; width: 38px; height: 22px;">
          <input type="checkbox" id="themeToggle" style="appearance: none; width: 38px; height: 22px; background: #232323; border-radius: 16px; outline: none; cursor: pointer; transition: background 0.3s; box-shadow: 0 1px 4px rgba(99,102,241,0.10); margin: 0; position: absolute; left: 0; top: 0;">
          <span id="themeToggleKnob" style="position: absolute; left: 0; top: 0; width: 22px; height: 22px; background: #fff; border-radius: 50%; box-shadow: 0 1px 4px rgba(99,102,241,0.10); transition: left 0.3s, background 0.3s;"></span>
        </span>
        <span style="font-size:1.3em; transition: filter 0.3s;">ðŸŒ™</span>
      </label>
    </div>
    <div class="buttons">
      <button onclick="clearCanvas()">Clear</button>
      <button onclick="downloadSignature()">Download</button>
      <button onclick="retrieveSignature()">Retrieve</button>
      <label>
        Background: <input type="color" id="bgColorPicker" value="#ffffff">
      </label>
      <label>
        Text Color: <input type="color" id="textColorPicker" value="#000000">
      </label>
      <label>
        Font Size: <input type="number" id="fontSizePicker" min="8" max="72" value="24" style="width:70px;"> px
      </label>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("signatureCanvas");
    const ctx = canvas.getContext("2d");
    const bgColorPicker = document.getElementById("bgColorPicker");
    const textColorPicker = document.getElementById("textColorPicker");
    const fontSizePicker = document.getElementById("fontSizePicker");
    const themeToggle = document.getElementById("themeToggle");

    function setTheme(isDark) {
      if (isDark) {
        document.body.classList.add("dark-theme");
      } else {
        document.body.classList.remove("dark-theme");
      }
    }

    themeToggle.addEventListener("change", (e) => {
      setTheme(e.target.checked);
    });

    // Optional: Remember theme preference
    if (localStorage.getItem("signatureAppTheme") === "dark") {
      themeToggle.checked = true;
      setTheme(true);
    }
    themeToggle.addEventListener("change", (e) => {
      localStorage.setItem("signatureAppTheme", e.target.checked ? "dark" : "light");
    });

    let drawing = false;
    let lastX = 0;
    let lastY = 0;

    // Set default drawing color and font size
    let currentColor = textColorPicker.value;
    let currentFontSize = parseInt(fontSizePicker.value, 10);

    // Initialize canvas background
    function setCanvasBackground(color) {
      ctx.fillStyle = color;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    setCanvasBackground(bgColorPicker.value);

    // Mouse events
    canvas.addEventListener("mousedown", (e) => {
      drawing = true;
      const rect = canvas.getBoundingClientRect();
      lastX = e.clientX - rect.left;
      lastY = e.clientY - rect.top;
      ctx.beginPath();
      ctx.moveTo(lastX, lastY);
    });
    canvas.addEventListener("mouseup", () => drawing = false);
    canvas.addEventListener("mouseleave", () => drawing = false);
    canvas.addEventListener("mousemove", draw);

    // Touch events for mobile
    canvas.addEventListener("touchstart", function(e) {
      e.preventDefault();
      drawing = true;
      const rect = canvas.getBoundingClientRect();
      const touch = e.touches[0];
      lastX = touch.clientX - rect.left;
      lastY = touch.clientY - rect.top;
      ctx.beginPath();
      ctx.moveTo(lastX, lastY);
    }, { passive: false });

    canvas.addEventListener("touchend", function(e) {
      e.preventDefault();
      drawing = false;
    }, { passive: false });

    canvas.addEventListener("touchcancel", function(e) {
      e.preventDefault();
      drawing = false;
    }, { passive: false });

    canvas.addEventListener("touchmove", function(e) {
      e.preventDefault();
      if (!drawing) return;
      const rect = canvas.getBoundingClientRect();
      const touch = e.touches[0];
      ctx.lineWidth = currentFontSize / 12;
      ctx.lineCap = "round";
      ctx.strokeStyle = currentColor;
      ctx.lineTo(touch.clientX - rect.left, touch.clientY - rect.top);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(touch.clientX - rect.left, touch.clientY - rect.top);
    }, { passive: false });

    function draw(e) {
      if (!drawing) return;
      const rect = canvas.getBoundingClientRect();
      ctx.lineWidth = currentFontSize / 12; // scale line width with font size
      ctx.lineCap = "round";
      ctx.strokeStyle = currentColor;
      ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
    }

    function clearCanvas() {
      setCanvasBackground(bgColorPicker.value);
      ctx.beginPath();
    }

    function downloadSignature() {
      const link = document.createElement("a");
      link.download = "signature.png";
      link.href = canvas.toDataURL("image/png");
      link.click();
      // Save to localStorage
      localStorage.setItem("signatureDataURL", canvas.toDataURL("image/png"));
    }

    function retrieveSignature() {
      const dataURL = localStorage.getItem("signatureDataURL");
      if (dataURL) {
        const img = new window.Image();
        img.onload = function() {
          clearCanvas();
          ctx.drawImage(img, 0, 0);
        };
        img.src = dataURL;
      } else {
        alert("No saved signature found.");
      }
    }

    bgColorPicker.addEventListener("input", () => {
      setCanvasBackground(bgColorPicker.value);
    });

    textColorPicker.addEventListener("input", () => {
      currentColor = textColorPicker.value;
    });

    fontSizePicker.addEventListener("input", () => {
      currentFontSize = parseInt(fontSizePicker.value, 10);
    });

    // Animate the round toggle knob
    const themeToggleKnob = document.getElementById("themeToggleKnob");
    function updateThemeKnob() {
      if (themeToggle.checked) {
        themeToggleKnob.style.left = "16px";
        themeToggleKnob.style.background = "#eebbc3";
      } else {
        themeToggleKnob.style.left = "0";
        themeToggleKnob.style.background = "#fff";
      }
    }
    themeToggle.addEventListener("change", updateThemeKnob);
    // Initialize knob position on load
    updateThemeKnob();

    themeToggle.addEventListener("change", () => {
      if (themeToggle.checked) {
        document.body.classList.add("dark-theme");
        document.getElementById("signature-container").classList.add("dark-theme");
        document.querySelector("h1").classList.add("dark-theme");
        document.querySelector("canvas").classList.add("dark-theme");
        document.querySelectorAll("button").forEach(btn => btn.classList.add("dark-theme"));
        document.querySelectorAll("label").forEach(lbl => lbl.classList.add("dark-theme"));
        document.querySelectorAll("input[type='color']").forEach(input => input.classList.add("dark-theme"));
        document.querySelectorAll("input[type='number']").forEach(input => input.classList.add("dark-theme"));
      } else {
        document.body.classList.remove("dark-theme");
        document.getElementById("signature-container").classList.remove("dark-theme");
        document.querySelector("h1").classList.remove("dark-theme");
        document.querySelector("canvas").classList.remove("dark-theme");
        document.querySelectorAll("button").forEach(btn => btn.classList.remove("dark-theme"));
        document.querySelectorAll("label").forEach(lbl => lbl.classList.remove("dark-theme"));
        document.querySelectorAll("input[type='color']").forEach(input => input.classList.remove("dark-theme"));
        document.querySelectorAll("input[type='number']").forEach(input => input.classList.remove("dark-theme"));
      }
    });
  </script>
</body>
</html>
